
@{
    ViewBag.Title = "Index";


}

<div class="row">
    @using (Html.BeginForm("Save", "rent", FormMethod.Post, new { id = "popupForum" }))
    {
        <div>
            <h1>Inchirieri Masini</h1>
        </div>
        <div class="form-group">
            <label class="form-label">Numar masina</label>
            <select class="form-control" id="nrmasina" name="nrmasina" placeholder="nrmasina" required>
                <option>Alegeti</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">ID client</label>
            <input type="text" id="idclient" name="idclient" class="form-control" placeholder="idclient" required>


        </div>
        <div class="form-group">
            <label class="form-label">Nume client</label>
            <input type="text" id="numeclient" name="numeclient" class="form-control" placeholder="NumeClient" required>


        </div>
        <div class="form-group">
            <label class="form-label">Pret inchiriere</label>
            <input type="text" id="pret" name="pret" class="form-control" placeholder="Pret" required>


        </div>
        <div class="form-group">
            <label class="form-label">Data inchiriere</label>
            <input type="date" id="sdata" name="sdata" class="form-control" placeholder="sData" required>


        </div>
        <div class="form-group">
            <label class="form-label">Data sfarsit inchiriere</label>
            <input type="date" id="edate" name="edate" class="form-control" placeholder="eDate" required>


        </div>
        <div class="form-group">
            <input type="submit" value="Salvare" class="btn btn-success"/>


        </div>


    }
</div>
@section scripts
{
    <script src="~/Scripts/jquery-3.4.1.js"></script>
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    
    <script>
        getMasina();
        

        function getMasina() {
            $.ajax({
                type: 'GET',
                url: '/Inchirieri/Getmasina',
                dataType: 'JSON',
                success: function (data) {
                    console.log(data);
                    for (var i = 0; i < data.length; i++) {
                        $("#nrmasina").append($("<option/>", {
                            text: data[i].nrmasina
                        }));

                    }
                }
            });
        }

        $("#nrmasina").change(function () {
            disponibil();
        });
        function disponibil() {
            $.ajax({
                type: 'POST',
                url: '/Inchirieri/Getavil?nrmasina=' + $("#nrmasina").val(),
                dataType: 'JSON',
                success: function (data) {
                    console.log(data);
                    var aval = data;
                    if (aval == "da") {
                        $("#idclient").removeAttr('disabled');
                        $("#numeclient").removeAttr('disabled');
                        $("pret").removeAttr('disabled');
                        $("#sdata").removeAttr('disabled');
                        $("#edate").removeAttr('disabled');
                        
                    }
                    else {
                        $("#idclient").attr("disabled", "disabled");
                        $("#numeclient").attr("disabled", "disabled");
                        $("#pret").attr("disabled", "disabled");
                        $("#sdata").attr("disabled", "disabled");
                        $("#edate").attr("disabled", "disabled");
                    }

                }
            });
        }








        getClient();

        function getClient() {
            $("#idclient").keyup(function (e) {
                $.ajax({
                    type: 'POST',
                    url: '/Inchirieri/Getid?id=' + $("#idclient").val(),
                    dataType: 'JSON',
                    success: function (data) {
                        console.log(data);
                        $("#numeclient").val(data)
                        
                    }
                });
            });

        }


    </script>



    
    
    
}

